#include<iostream.h>
#include<cstdlib>
#include<iomanip.h>
#include<conio.h>
#include<ctime>
class DateTime
{
private:
	int year;
	int month;
	int day;
	int hour;
	int minute;
	int second;
public:
	DateTime();
	DateTime(int y, int m, int d, int h, int min, int s);
    DateTime operator ++ ();
	DateTime operator ++ (int);
	friend ostream & operator << (ostream & output, DateTime & d);
	void display();
};
int x[2][13] = {{0,31,28,31,30,31,30,31,31,30,31,30,31},{0,31,29,31,30,31,30,31,31,30,31,30,31}};
int cul(int y)
{
	if(y%400 == 0 || y%4 == 0 && y%100 != 0)
		return 1;
	else
		return 0;
}
DateTime::DateTime()
{
    long now = time(NULL);
	tm local = *localtime(& now);//一个类tm 变量名local 函数*localtime 地址* 入口值now
	year = local.tm_year+1900;
	month = local.tm_mon+1;
	day = local.tm_mday;
	hour = local.tm_hour;
	minute = local.tm_min;
	second = local.tm_sec;
}
DateTime::DateTime(int y, int m, int d, int h, int min, int s)
{
	year = y;
	month = m;
	day = d;
	hour = h;
	minute = min;
	second = s;
}
DateTime DateTime::operator ++ ()
{
	second = second + 1;
	minute = minute + second/60;
	second = second%60;
	hour = hour + minute/60;
	minute = minute%60;
	if(hour >= 24)
	{
		day = day + hour/24;
		hour = hour%24;
		if(day > x[cul(year)][month])
		{
			month++;
			day = 1;
			if(month > 12)
			{
				year++;
				month = 1;
			}
		}
	}
	return *this;
}
DateTime DateTime::operator ++ (int)
{
	DateTime d(*this);
	++(*this);
	return d;
}
void DateTime::display()
{
	cout<<setfill('0')<<setw(4)<<year<<"-";
	cout<<setfill('0')<<setw(2)<<month<<"-";
	cout<<setfill('0')<<setw(2)<<day<<" ";
	cout<<setfill('0')<<setw(2)<<hour<<":";
	cout<<setfill('0')<<setw(2)<<minute<<":";
	cout<<setfill('0')<<setw(2)<<second<<endl;
}
ostream & operator << (ostream & output, DateTime & d)
{
	output<<setfill('0')<<setw(4)<<d.year<<"-";
	output<<setfill('0')<<setw(2)<<d.month<<"-";
	output<<setfill('0')<<setw(2)<<d.day<<" ";
	output<<setfill('0')<<setw(2)<<d.hour<<":";
	output<<setfill('0')<<setw(2)<<d.minute<<":";
	output<<setfill('0')<<setw(2)<<d.second<<endl;
	return output;
}
int main()
{
	DateTime now(2015,2,28,23,59,58), t;
	long t1 = time(NULL),t2;
	cout<<now;
//	now.display();
	while(!-kbhit())
	{
		t2 = time(NULL);
		if(t2-t1 == 1)
		{
			system("cls");
			t1 = t2;
			t = ++now;
			t.display();
		//	cout<<t;
		}
	}
	return 0;
}
